(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{289:function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},295:function(e,t,n){var r;/*!
Copyright (c) 2017 Jed Watson.
Licensed under the MIT License (MIT), see
http://jedwatson.github.io/classnames
*/!function(){"use strict";var n={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var i=typeof r;if("string"===i||"number"===i)e.push(r);else if(Array.isArray(r)&&r.length){var s=o.apply(null,r);s&&e.push(s)}else if("object"===i)for(var a in r)n.call(r,a)&&r[a]&&e.push(a)}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(r=function(){return o}.apply(t,[]))||(e.exports=r)}()},296:function(e,t,n){var r=n(289);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}},316:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return S}));var r=n(42),o=n.n(r),i=n(317),s=n.n(i),a=n(27),c=n.n(a),u=n(28),l=n.n(u),f=n(29),p=n.n(f),v=n(30),h=n.n(v),d=n(22),m=n.n(d),y=n(0),b=n.n(y);function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h()(this,n)}}var O=function(e){p()(n,e);var t=g(n);function n(e){var r;return c()(this,n),(r=t.call(this,e)).state={minHeight:e.minHeight},r}return l()(n,[{key:"render",value:function(){var e=this;return b.a.createElement("div",{ref:function(t){return e.node=t},"data-infinite-scroll":this.props.index,style:{minHeight:this.state.minHeight}},this.props.show&&this.props.render(Object.assign({index:this.props.index},this.props.data)))}},{key:"componentWillReceiveProps",value:function(e){e.show&&!this.props.show?this.setState({minHeight:this.props.minHeight}):!e.show&&this.props.show&&this.setState({minHeight:this.node.clientHeight})}},{key:"componentDidMount",value:function(){var e=this;this.props.observers.forEach((function(t){return t&&t.observe(e.node)}))}},{key:"componentWillUnmount",value:function(){var e=this;this.props.observers.forEach((function(t){return t&&t.unobserve(e.node)}))}}]),n}(b.a.Component),k=function(e){p()(n,e);var t=g(n);function n(){return c()(this,n),t.apply(this,arguments)}return l()(n,[{key:"render",value:function(){var e=this;return b.a.createElement("div",{ref:function(t){return e.node=t},"data-infinite-scroll":"load-more"})}},{key:"componentDidMount",value:function(){var e=this;this.props.observers.forEach((function(t){return t&&t.observe(e.node)}))}},{key:"componentWillUnmount",value:function(){var e=this;this.props.observers.forEach((function(t){return t&&t.unobserve(e.node)}))}}]),n}(b.a.Component);function x(t){return function(n){p()(o,n);var r=g(o);function o(t){var n;return c()(this,o),n=r.call(this,t),e.IntersectionObserver&&(n.focusObserver=new IntersectionObserver((function(e){return n.focusCallback(e)}),{rootMargin:"-".concat(100-t.focusCallbackAt,"% 0px -").concat(t.focusCallbackAt,"%")})),n}return l()(o,[{key:"componentWillUnmount",value:function(){this.focusObserver&&this.focusObserver.disconnect()}},{key:"focusCallback",value:function(e){var t=this;e.forEach((function(e){var n=e.target.getAttribute("data-infinite-scroll");e.isIntersecting&&t.props.onFocus(n)}))}},{key:"render",value:function(){return b.a.createElement(t,Object.assign({},this.props,{observers:(this.props.observers||[]).concat([this.focusObserver])}))}}]),o}(b.a.Component)}var S=x(function(t){p()(r,t);var n=g(r);function r(t){var o;c()(this,r),o=n.call(this,t);var i=t.initiallyShow||1;return o.state={visibleComponents:s()(Array(i).keys()).reduce((function(e,t){return e[t]=!0,e}),{})},e.IntersectionObserver&&(o.loadObserver=new IntersectionObserver((function(e){return o.intersectionCallback(e)}),{rootMargin:t.loadMargin||"200px 0px 500px"})),o}return l()(r,[{key:"componentWillUnmount",value:function(){this.loadObserver&&this.loadObserver.disconnect()}},{key:"intersectionCallback",value:function(e){var t=this,n=this.state.visibleComponents;e.forEach((function(e){if(void 0===e.isIntersecting){if(!t.props.showAllOnLegacyBrowser)return;e.isIntersecting=!0}var r=e.target.getAttribute("data-infinite-scroll");if("load-more"==r&&e.isIntersecting)t.props.loadNext();else{var i=t.props.neverHideItem&&n[r]||e.isIntersecting;n=Object.assign({},n,o()({},r,i))}})),this.setState({visibleComponents:n})}},{key:"render",value:function(){var e=this;return b.a.createElement("div",null,this.props.items.map((function(t,n){return b.a.createElement(O,{observers:e.props.observers.concat([e.loadObserver]),key:n,index:n,show:e.state.visibleComponents[n],render:e.props.render,data:t,minHeight:e.props.minHeight||50})})),b.a.createElement(k,{observers:[this.loadObserver]}))}}]),r}(b.a.Component))}).call(this,n(9))},317:function(e,t,n){var r=n(318),o=n(319),i=n(296),s=n(320);e.exports=function(e){return r(e)||o(e)||i(e)||s()}},318:function(e,t,n){var r=n(289);e.exports=function(e){if(Array.isArray(e))return r(e)}},319:function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},320:function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},344:function(e,t,n){var r=n(402);e.exports=function(e){return(null==e?0:e.length)?r(e,1):[]}},352:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n(27),o=n.n(r),i=n(28),s=n.n(i),a=n(29),c=n.n(a),u=n(30),l=n.n(u),f=n(22),p=n.n(f),v=n(0),h=n.n(v),d=n(99);function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var o=p()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l()(this,n)}}var y=function(e){c()(n,e);var t=m(n);function n(e){var r;return o()(this,n),(r=t.call(this,e)).state={loading:!1,pageNumber:1,moreStories:[],noMoreStories:!1},r}return s()(n,[{key:"stories",value:function(){return this.props.stories.concat(this.state.moreStories)}},{key:"loadMore",value:function(e){var t=this;if(e.preventDefault(),!this.state.loading){var n=this.state.pageNumber;this.setState({loading:!0,pageNumber:n+1},(function(){t.props.loadStories(n).then((function(e){t.setState({loading:!1,moreStories:t.state.moreStories.concat(Object(d.d)(t.stories(),e)),noMoreStories:e.length<t.props.numStoriesToLoad})}))}))}}},{key:"render",value:function(){var e=this;return this.props.template(Object.assign({},this.props,{stories:this.stories(),onLoadMore:function(t){return e.loadMore(t)},loading:this.state.loading,noMoreStories:this.state.noMoreStories}))}}]),n}(h.a.Component)},398:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return m}));var r=n(27),o=n.n(r),i=n(28),s=n.n(i),a=n(29),c=n.n(a),u=n(30),l=n.n(u),f=n(22),p=n.n(f),v=n(0),h=n.n(v);n(1);function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var o=p()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l()(this,n)}}var m=function(t){c()(r,t);var n=d(r);function r(e){var t;return o()(this,r),(t=n.call(this,e)).state={loaded:!1},t.observerRef=h.a.createRef(),t}return s()(r,[{key:"render",value:function(){return this.state.loaded?this.props.children():h.a.createElement("div",{style:{height:this.props.height||50},ref:this.observerRef})}},{key:"componentDidMount",value:function(){var t=this;this.observer=new e.IntersectionObserver((function(e,n){return t.observerCallback(e,n)}),{rootMargin:this.props.margin||"160px"}),this.observer.observe(this.observerRef.current)}},{key:"componentWillUnmount",value:function(){this.observer.disconnect()}},{key:"observerCallback",value:function(e,t){var n=this;e.forEach((function(e){(e.isIntersecting||void 0===e.isIntersecting)&&(n.setState({loaded:!0}),t.disconnect())}))}}]),r}(h.a.Component)}).call(this,n(9))},402:function(e,t,n){var r=n(403),o=n(404);e.exports=function e(t,n,i,s,a){var c=-1,u=t.length;for(i||(i=o),a||(a=[]);++c<u;){var l=t[c];n>0&&i(l)?n>1?e(l,n-1,i,s,a):r(a,l):s||(a[a.length]=l)}return a}},403:function(e,t){e.exports=function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}},404:function(e,t,n){var r=n(405),o=n(408),i=n(106),s=r?r.isConcatSpreadable:void 0;e.exports=function(e){return i(e)||o(e)||!!(s&&e&&e[s])}},405:function(e,t,n){var r=n(406).Symbol;e.exports=r},406:function(e,t,n){var r=n(407),o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")();e.exports=i},407:function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(this,n(9))},408:function(e,t){e.exports=function(){return!1}},448:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return k}));var r=n(29),o=n.n(r),i=n(30),s=n.n(i),a=n(22),c=n.n(a),u=n(449),l=n.n(u),f=n(27),p=n.n(f),v=n(28),h=n.n(v),d=n(0),m=n.n(d),y=n(1);function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c()(e);if(t){var o=c()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s()(this,n)}}var g=function(){function t(e){p()(this,t),this.observedItems=[],this.callback=e}return h()(t,[{key:"start",value:function(t){var n=this;this.observer=new e.IntersectionObserver((function(e){return n.onObservation(e)}),{rootMargin:t,threshold:0}),this.observedItems.forEach((function(e){var t=l()(e,2),r=t[0];t[1];return n.observer.observe(r)}))}},{key:"onObservation",value:function(e){var t=this;e.filter((function(e){return void 0===e.isIntersecting||e.isIntersecting})).map((function(e){return e.target})).forEach((function(e){var n=t.observedItems.findIndex((function(t){return t[0]===e}));if(n>-1){var r=t.observedItems[n][1];t.callback(r),t.unregister(e,r)}}))}},{key:"register",value:function(e,t){this.observedItems.push([e,t]),this.observer&&this.observer.observe(e)}},{key:"unregister",value:function(e,t){var n=this.observedItems.findIndex((function(t){return t[0]===e}));n>-1&&(this.observedItems.splice(n,1),this.observer&&this.observer.unobserve(e))}},{key:"disconnect",value:function(){this.observer.disconnect()}}]),t}(),O=function(){function e(t){p()(this,e),this.callback=t}return h()(e,[{key:"register",value:function(e,t){this.callback(t)}},{key:"start",value:function(){}},{key:"unregister",value:function(){}},{key:"disconnect",value:function(){}}]),e}(),k=function(t){o()(r,t);var n=b(r);function r(t){var o;p()(this,r);var i=function(e){return e.showImage()};return(o=n.call(this,t)).observerWrapper=e.IntersectionObserver?new g(i):new O(i),o}return h()(r,[{key:"componentDidMount",value:function(){this.observerWrapper.start(this.props.margin||"500px")}},{key:"componentWillUnmount",value:function(){this.observerWrapper.disconnect()}},{key:"getChildContext",value:function(){var e=this;return{lazyLoadObserveImage:function(t,n){return t&&e.observerWrapper.register(t,n)},lazyLoadUnobserveImage:function(t,n){return t&&e.observerWrapper.unregister(t,n)}}}},{key:"render",value:function(){return this.props.children}}]),r}(m.a.Component);k.childContextTypes={lazyLoadObserveImage:y.func,lazyLoadUnobserveImage:y.func}}).call(this,n(9))},449:function(e,t,n){var r=n(450),o=n(451),i=n(296),s=n(452);e.exports=function(e,t){return r(e)||o(e,t)||i(e,t)||s()}},450:function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},451:function(e,t){e.exports=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}}},452:function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},486:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var r=n(27),o=n.n(r),i=n(28),s=n.n(i),a=n(29),c=n.n(a),u=n(30),l=n.n(u),f=n(22),p=n.n(f),v=n(0),h=n.n(v),d=n(2),m=n.n(d),y=n(100),b=n(352);function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var o=p()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l()(this,n)}}var O=function(e){c()(n,e);var t=g(n);function n(){return o()(this,n),t.apply(this,arguments)}return s()(n,[{key:"loadMoreStories",value:function(e){var t=m()(this.props,["data","stories"],[]),n=m()(this.props,["authorId"],null),r=n?"/api/v1/authors/".concat(n,"/collection"):"/api/v1/collections/".concat(this.props.collectionSlug);return Object(y.a)(r,Object.assign({},this.props.params,{offset:this.props.numStoriesToLoad*(e-1)+t.length,limit:this.props.numStoriesToLoad||10})).json((function(e){return(e.items||[]).map((function(e){return e.story}))}))}},{key:"render",value:function(){var e=this;return h.a.createElement(b.a,Object.assign({},this.props.data,{template:this.props.template,loadStories:function(t){return e.loadMoreStories(t)},languageDirection:this.props.languageDirection,numStoriesToLoad:this.props.numStoriesToLoad||10}))}}]),n}(h.a.Component)},771:function(e,t,n){"use strict";n.d(t,"a",(function(){return E}));var r=n(0),o=n.n(r),i=n(4),s=n(2),a=n.n(s),c=n(486),u=n(448),l=n(27),f=n.n(l),p=n(28),v=n.n(p),h=n(29),d=n.n(h),m=n(30),y=n.n(m),b=n(22),g=n.n(b);function O(e){return{clientSideRendered:e.clientSideRendered}}function k(e){return{}}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var o=g()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}var S=function(e){d()(n,e);var t=x(n);function n(){return f()(this,n),t.apply(this,arguments)}return v()(n,[{key:"render",value:function(){return this.props.clientSideRendered?o.a.createElement("div",{className:"client-side-only client-side-only-client"},this.props.children):o.a.createElement(this.props.serverComponent||"div",Object.assign({className:"client-side-only client-side-only-server"},this.props))}}]),n}(o.a.Component),j=Object(i.connect)(O,k)(S);function I(e,t){var n=t.lazy_load_images;return void 0!==n&&n?o.a.createElement(u.a,{},e):e}function w(e,t){var n=t.client_side_only;return void 0!==n&&n?o.a.createElement(j,{},e):e}function R(e){return function(t){if(!t.collection)return o.a.createElement("div",null);var n,r=t.collection["associated-metadata"]||{},i=(n=t.collection).items?n.items.filter((function(e){return"story"===e.type})).map((function(e){return t=e.story,(n=a()(t,["alternative","home","default"]))?Object.assign({},t,{headline:n.headline||t.headline,"hero-image-s3-key":n["hero-image"]?n["hero-image"]["hero-image-s3-key"]:t["hero-image-s3-key"],"hero-image-metadata":n["hero-image"]?n["hero-image"]["hero-image-metadata"]:t["hero-image-metadata"],"hero-image-caption":n["hero-image"]?n["hero-image"]["hero-image-caption"]:t["hero-image-caption"],"hero-image-attribution":n["hero-image"]?n["hero-image"]["hero-image-attribution"]:t["hero-image-attribution"]}):t;var t,n})):[];r.initial_stories_load_count&&(i=i.slice(0,r.initial_stories_load_count));var s=Object.assign({},t,{stories:i,associatedMetadata:r}),u=function(e,t,n,r,i){return n?o.a.createElement(c.a,{template:e,collectionSlug:r,params:{"item-type":"story"},data:t,numStoriesToLoad:i}):o.a.createElement(e,t)}(e,s,r.enable_load_more_button,t.collection.slug,r.subsequent_stories_load_count||10);return[w,I].reduce((function(e,t){return t(e,r)}),u)}}function E(e){var t=Object(i.connect)((function(e){return{config:e.qt.config}}))(R(e));return e.storyLimit&&(t.storyLimit=e.storyLimit),e.nestedCollectionLimit&&(t.nestedCollectionLimit=e.nestedCollectionLimit),t}},772:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(45),o=n.n(r),i=n(0),s=n.n(i),a=n(316),c=(n(1),n(42)),u=n.n(c),l=n(99);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(){return s.a.createElement("div",{"data-comment":"Story Template Not Implemented"})}function h(){return s.a.createElement("div",{"data-comment":"Collection Template Not Implemented"})}function d(e){var t=e.className,n=e.collection,r=e.collectionTemplates,i=e.storyTemplates,c=e.lazyAfter,u=o()(e,["className","collection","collectionTemplates","storyTemplates","lazyAfter"]);return s.a.createElement("div",{className:t},s.a.createElement(a.a,{render:function(e){var t=e.index;return function(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};switch(e.type){case"collection":return s.a.createElement(n(Object(l.b)(e),t),p({key:"".concat(t,"-").concat(e.id),index:t,collection:e,metadata:e["associated-metadata"]||{}},o));case"story":return s.a.createElement(r(t),p({key:"".concat(t,"-").concat(e.id),index:t,story:e.story,metadata:e["associated-metadata"]||{}},o));default:return s.a.createElement("div",{"data-comment":"".concat(e.type," not implemented")})}}(n.items[t],t,r,i,u)},items:n.items,loadNext:function(){return[]},initiallyShow:c,neverHideItem:!0,showAllOnLegacyBrowser:!0,focusCallbackAt:20,onFocus:function(){}}))}d.defaultProps={collectionTemplates:function(){return h},storyTemplates:function(){return v}}}}]);